<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Screenless Hub</title>
</head>
<body>

<div class="mobile-container">
  <div id="screen-hub" class="screen active">
    <header>
      <span class="sub-text">Total Usage</span>
      <h1>5h 24m</h1>
    </header>

    <div class="card chart-container">
      <span class="label-text">Weekly Activity</span>
      <div class="graph-wrapper">
        <div class="bar" style="height: 40%"><span class="day">M</span></div>
        <div class="bar" style="height: 65%"><span class="day">T</span></div>
        <div class="bar" style="height: 85%"><span class="day">W</span></div>
        <div class="bar" style="height: 50%"><span class="day">T</span></div>
        <div class="bar active" style="height: 95%"><span class="day">F</span></div>
        <div class="bar" style="height: 30%"><span class="day">S</span></div>
        <div class="bar" style="height: 20%"><span class="day">S</span></div>
      </div>
    </div>

    <h3 class="section-title">App Breakdown</h3>
    <div class="app-list">
      <div class="card">
        <div class="card-info">
          <div class="icon-box">üì∏</div>
          <div><span class="label-text">Instagram</span><span class="sub-text">Social</span></div>
        </div>
        <span class="limit-value">2h 10m</span>
      </div>
      <div class="card">
        <div class="card-info">
          <div class="icon-box">üé¨</div>
          <div><span class="label-text">YouTube</span><span class="sub-text">Video</span></div>
        </div>
        <span class="limit-value">1h 45m</span>
      </div>
      <div class="card">
        <div class="card-info">
          <div class="icon-box">üéÆ</div>
          <div><span class="label-text">Roblox</span><span class="sub-text">Gaming</span></div>
        </div>
        <span class="limit-value">54m</span>
      </div>
    </div>
  </div>

  <div id="screen-limits" class="screen">
    <header><h1>Settings</h1></header>

    <div class="card">
      <div class="card-info">
        <div class="icon-box">‚è≥</div>
        <div>
          <span class="label-text">Global Daily Limit</span>
          <span class="sub-text">Currently: <span id="display-global-limit">Loading...</span></span>
        </div>
      </div>
      <input type="number" id="global-limit-input" placeholder="Hrs" style="width: 50px; background: #333; border: none; color: white; border-radius: 4px; padding: 5px;">
    </div>

    <h3 class="section-title">Manage App Limits</h3>
    <div id="settings-app-list">
    </div>

    <div class="card" style="border: 1px dashed var(--accent-green); background: transparent;">
      <div class="card-info" style="width: 100%;">
        <input type="text" id="new-app-name" placeholder="App Name" style="flex: 1; background: transparent; border: none; color: white;">
        <input type="number" id="new-app-time" placeholder="Mins" style="width: 60px; background: #333; border: none; color: white; padding: 5px; margin: 0 10px;">
        <button onclick="addAppLimit()" style="background: var(--primary-green); border: none; border-radius: 50%; width: 30px; height: 30px; color: white; cursor: pointer;">+</button>
      </div>
    </div>
  </div>

  <script>
    // State management
    let appLimits = [
      { name: 'Instagram', time: '2h 10m', icon: 'üì∏' },
      { name: 'YouTube', time: '1h 45m', icon: 'üé¨' },
      { name: 'Roblox', time: '54m', icon: 'üéÆ' }
    ];

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');

      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
        if(item.getAttribute('onclick').includes(id)) item.classList.add('active');
      });

      if(id === 'screen-hub') renderHub();
      if(id === 'screen-limits') renderSettings();
    }

    // Update the Home Hub with current data
    function renderHub() {
      const list = document.querySelector('.app-list');
      list.innerHTML = appLimits.map(app => `
            <div class="card">
                <div class="card-info">
                    <div class="icon-box">${app.icon}</div>
                    <div><span class="label-text">${app.name}</span><span class="sub-text">Active Limit</span></div>
                </div>
                <span class="limit-value">${app.time}</span>
            </div>
        `).join('');
    }

    // Update the Settings screen
    function renderSettings() {
      const list = document.getElementById('settings-app-list');
      list.innerHTML = appLimits.map((app, index) => `
            <div class="card">
                <div class="card-info">
                    <span>${app.icon} ${app.name}</span>
                </div>
                <button onclick="removeLimit(${index})" style="background: none; border: none; color: var(--danger); cursor: pointer;">Remove</button>
            </div>
        `).join('');
    }

    function addAppLimit() {
      const nameInput = document.getElementById('new-app-name');
      const timeInput = document.getElementById('new-app-time');

      if (nameInput.value && timeInput.value) {
        appLimits.push({
          name: nameInput.value,
          time: timeInput.value + 'm',
          icon: 'üì±'
        });
        nameInput.value = '';
        timeInput.value = '';
        renderSettings();
      }
    }

    function removeLimit(index) {
      appLimits.splice(index, 1);
      renderSettings();
    }

    // Global limit listener
    document.getElementById('global-limit-input').addEventListener('change', (e) => {
      document.getElementById('display-global-limit').innerText = e.target.value + 'h 00m';
      document.querySelector('#screen-hub h1').innerText = e.target.value + 'h 00m';
    });
    const activities = [
      { label: "Read 10 pages of a book", time: 10 },
      { label: "Go for a 15m walk", time: 15 },
      { label: "Meditation / Breathing", time: 5 },
      { label: "Sketch something for 10m", time: 10 }
    ];

    function goToIntervention(appName) {
      document.getElementById('target-app').innerText = appName;
      const randomActivity = activities[Math.floor(Math.random() * activities.length)];
      const actBtn = document.getElementById('activity-btn');
      actBtn.innerText = randomActivity.label;
      actBtn.dataset.minutes = randomActivity.time;

      // Switch to intervention screen
      showScreen('screen-intervention');
      // Hide nav bar so they are "forced" to choose
      document.querySelector('.bottom-nav').style.display = 'none';
    }

    function startActivity() {
      const minutes = document.getElementById('activity-btn').dataset.minutes;
      document.getElementById('timer-label').innerText = document.getElementById('activity-btn').innerText;
      document.getElementById('timer-clock').innerText = minutes + ":00";

      showScreen('screen-timer');
    }

    function goToBlackScreen() {
      showScreen('screen-black');
      document.querySelector('.bottom-nav').style.display = 'none';
    }

    // Wrap the original showScreen to handle the Nav Bar visibility
    const baseShowScreen = showScreen;
    showScreen = function(id) {
      // Show nav bar only on primary screens
      const primaryScreens = ['screen-hub', 'screen-limits', 'screen-permissions', 'screen-simulation'];
      document.querySelector('.bottom-nav').style.display = primaryScreens.includes(id) ? 'flex' : 'none';

      baseShowScreen(id);
    }


    // Initial render
    renderHub();
  </script>

  <div id="screen-permissions" class="screen">
    <header><h1>Permissions</h1></header>
    <div class="card">
      <div class="card-info">
        <div class="icon-box">üõ°Ô∏è</div>
        <div><span class="label-text">System Access</span><span class="sub-text">Required for tracking</span></div>
      </div>
      <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
    </div>
    <div class="card">
      <div class="card-info">
        <div class="icon-box">üìç</div>
        <div><span class="label-text">Location</span><span class="sub-text">Usage by region</span></div>
      </div>
      <label class="switch"><input type="checkbox"><span class="slider"></span></label>
    </div>
  </div>

  <nav class="bottom-nav">
    <div class="nav-item" onclick="showScreen('screen-permissions')"><span class="nav-icon">üõ°Ô∏è</span><span class="nav-label">Security</span></div>
    <div class="nav-item active" onclick="showScreen('screen-hub')"><span class="nav-icon">üè†</span><span class="nav-label">Home</span></div>
    <div class="nav-item" onclick="showScreen('screen-limits')"><span class="nav-icon">‚öôÔ∏è</span><span class="nav-label">Settings</span></div>
    <div class="nav-item" onclick="showScreen('screen-simulation')"><span class="nav-icon">üì±</span><span class="nav-label">Sim</span></div>
  </nav>

  <div id="screen-simulation" class="screen">
    <header><h1>Phone Mockup</h1></header>
    <div class="phone-grid">
      <div class="app-box" onclick="goToIntervention('Instagram')">Instagram</div>
      <div class="app-box" onclick="goToIntervention('TikTok')">TikTok</div>
    </div>
  </div>

  <div id="screen-intervention" class="screen">
    <div class="intervention-container">
      <div class="icon-box" style="width: 60px; height: 60px; margin: 0 auto 20px; font-size: 2rem;">‚ö†Ô∏è</div>
      <h2>Hold on!</h2>
      <p>Are you sure you want to open <span id="target-app" style="color: var(--accent-green);"></span>?</p>
      <p class="sub-text" style="margin-bottom: 30px;">It looks like you've reached your limit. Why not try this instead:</p>

      <button id="activity-btn" class="btn-primary" style="position: static; transform: none; width: 100%;" onclick="startActivity()">
        Go for a 15m Walk
      </button>

      <button class="override-btn" style="margin-top: 40px; border: none; text-decoration: underline;" onclick="goToBlackScreen()">
        Ignore and open anyway
      </button>
    </div>
  </div>

  <div id="screen-timer" class="screen">
    <div class="timer-container">
      <h2 id="timer-label">Walking...</h2>
      <div class="timer-display" id="timer-clock">15:00</div>
      <div class="progress-bg" style="width: 80%; margin: 20px auto;">
        <div class="progress-fill" style="width: 100%; animation: shrink 900s linear forwards;"></div>
      </div>
      <button class="override-btn" style="margin-top: 50px;" onclick="goToBlackScreen()">I GIVE UP (OVERRIDE)</button>
    </div>
  </div>

  <div id="screen-black" class="screen" style="background: black; z-index: 1000; padding: 0;">
    <div style="height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
      <p style="color: #222;">Instagram Content Loaded...</p>

      <button class="exit-app-btn" onclick="showScreen('screen-simulation')">
        ‚úï Close App
      </button>
    </div>
  </div>

</div>

<script>
  function showScreen(id) {
    // Hide all screens
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    // Show selected screen
    document.getElementById(id).classList.add('active');

    // Update nav styling
    document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
    event.currentTarget.classList.add('active');
  }
</script>

</body>
</html>